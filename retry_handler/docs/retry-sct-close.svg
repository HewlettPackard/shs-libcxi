<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1029px" preserveAspectRatio="none" style="width:599px;height:1029px;" version="1.1" viewBox="0 0 599 1029" width="599px" zoomAndPan="magnify"><defs><filter height="300%" id="f6x3jsf995t4p" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="539" x="33.5" y="16.708">SCT_TIMEOUT PCT event state machine in the retry handler</text><ellipse cx="333.2091" cy="38.9531" fill="#000000" filter="url(#f6x3jsf995t4p)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f6x3jsf995t4p)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="238" x="214.2091" y="125.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="214.2091" x2="452.2091" y1="152.25" y2="152.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="292.7091" y="143.9482">sct_timeout</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="218" x="219.2091" y="168.3887">process C_PCT_SCT_TIMEOUT event</text><rect fill="#FEFECE" filter="url(#f6x3jsf995t4p)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="166.2091" y="252.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="166.2091" x2="322.2091" y1="279.25" y2="279.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="176.2091" y="270.9482">schedule_sct_close</text><rect fill="#FEFECE" filter="url(#f6x3jsf995t4p)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="331.7091" y="887.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="331.7091" x2="406.7091" y1="914.25" y2="914.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="55" x="341.7091" y="905.9482">free_sct</text><rect fill="#FEFECE" filter="url(#f6x3jsf995t4p)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="109.2091" y="506.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="109.2091" x2="269.2091" y1="533.25" y2="533.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="140" x="119.2091" y="524.9482">send_close_request</text><rect fill="#FEFECE" filter="url(#f6x3jsf995t4p)" height="50" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="132" x="134.2091" y="379.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="134.2091" x2="266.2091" y1="406.25" y2="406.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="144.2091" y="397.9482">add_close_timer</text><rect fill="#FEFECE" filter="url(#f6x3jsf995t4p)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="284" x="130.2091" y="760.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130.2091" x2="414.2091" y1="787.25" y2="787.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="210.7091" y="778.9482">check_sct_closed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="264" x="135.2091" y="803.3887">check whether the SCT was silently closed</text><rect fill="#FEFECE" filter="url(#f6x3jsf995t4p)" height="50.2656" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="165" x="106.7091" y="633.9531"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="106.7091" x2="271.7091" y1="660.25" y2="660.25"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="145" x="116.7091" y="651.9482">add_sct_check_timer</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="111.7091" y="676.3887">schedule check timer</text><ellipse cx="369.2091" cy="1008.9531" fill="none" filter="url(#f6x3jsf995t4p)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="369.7091" cy="1009.4531" fill="#000000" rx="6" ry="6" style="stroke: none; stroke-width: 1.0;"/><!--link *start to sct_timeout--><path d="M333.2091,49.289 C333.2091,65.299 333.2091,96.7165 333.2091,120.4102 " fill="none" id="*start-sct_timeout" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="333.2091,125.6435,337.2091,116.6435,333.2091,120.6435,329.2091,116.6435,333.2091,125.6435" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="334.2091" y="92.02">C_PCT_SCT_TIMEOUT event</text><!--link sct_timeout to schedule_sct_close--><path d="M315.6256,176.0442 C300.9979,196.9175 280.1547,226.66 264.7592,248.6289 " fill="none" id="sct_timeout-schedule_sct_close" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="261.7561,252.9141,270.1969,247.8394,264.6256,248.8195,263.6455,243.2482,261.7561,252.9141" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="294.2091" y="219.02">nb retries &lt; max</text><!--link sct_timeout to free_sct--><path d="M387.7121,176.1056 C424.8107,197.3836 467.2091,231.7978 467.2091,277.9531 C467.2091,277.9531 467.2091,277.9531 467.2091,785.9531 C467.2091,819.4136 464.6631,830.729 445.2091,857.9531 C436.2762,870.454 423.6066,881.2103 411.1673,889.8103 " fill="none" id="sct_timeout-free_sct" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="406.9633,892.6435,416.6621,890.9306,411.1095,889.8491,412.191,884.2966,406.9633,892.6435" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="468.2091" y="536.52">nb retries == max</text><!--link schedule_sct_close to send_close_request--><path d="M166.2023,290.3239 C113.7675,303.1348 48.3908,328.8492 15.2091,379.9531 C-19.0128,432.6593 53.8196,477.7827 115.4919,504.8645 " fill="none" id="schedule_sct_close-send_close_request" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="120.2872,506.9442,113.622,499.6933,115.7001,504.9547,110.4387,507.0327,120.2872,506.9442" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="16.2091" y="409.52">nb retries == 0</text><!--link send_close_request to schedule_sct_close--><path d="M269.2257,512.8325 C286.9418,504.7293 303.5849,493.235 314.2091,476.9531 C349.1833,423.3545 342.1859,390.5144 314.2091,332.9531 C309.274,322.7993 301.456,313.962 292.802,306.5167 " fill="none" id="send_close_request-schedule_sct_close" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="288.4956,302.9738,292.9045,311.7808,292.3568,306.1505,297.9871,305.6028,288.4956,302.9738" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="338.2091" y="409.52">PCP paused</text><!--link schedule_sct_close to add_close_timer--><path d="M232.3409,303.1201 C228.2085,312.3848 223.7301,323.0374 220.2091,332.9531 C215.4186,346.444 211.0419,361.6827 207.6123,374.6556 " fill="none" id="schedule_sct_close-add_close_timer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="206.2978,379.6926,212.4408,371.9943,207.5604,374.8547,204.7,369.9742,206.2978,379.6926" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="221.2091" y="346.02">nb retries &gt; 0</text><!--link add_close_timer to send_close_request--><path d="M192.3876,430.1655 C189.8863,439.4347 187.4462,450.0787 186.2091,459.9531 C184.493,473.6519 184.8138,488.9193 185.7344,501.8575 " fill="none" id="add_close_timer-send_close_request" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="186.1293,506.8776,189.4109,497.5915,185.737,501.893,181.4355,498.2192,186.1293,506.8776" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="122" x="187.2091" y="473.02">close timer expired</text><!--link check_sct_closed to add_sct_check_timer--><path d="M275.1477,760.7613 C275.6658,746.1929 274.2047,728.0205 266.2091,713.9531 C260.3136,703.5806 251.5661,694.6668 242.0592,687.2189 " fill="none" id="check_sct_closed-add_sct_check_timer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="237.9445,684.1167,242.7231,692.7287,241.937,687.1267,247.539,686.3406,237.9445,684.1167" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="273.2091" y="727.02">SCT still pending</text><!--link add_sct_check_timer to check_sct_closed--><path d="M148.4775,684.113 C131.9436,697.5732 119.0663,714.6877 130.2091,730.9531 C136.9745,740.8286 156.7227,750.5998 179.4218,759.1046 " fill="none" id="add_sct_check_timer-check_sct_closed" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="184.3068,760.8998,177.2389,754.0409,179.6137,759.1751,174.4794,761.5499,184.3068,760.8998" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="131.2091" y="727.02">check timer expired</text><!--link check_sct_closed to free_sct--><path d="M272.7949,811.1037 C274.2139,825.8335 277.9371,844.1853 287.2091,857.9531 C297.1017,872.6422 312.3645,884.4329 327.052,893.2721 " fill="none" id="check_sct_closed-free_sct" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="331.5851,895.9206,325.8319,887.9268,327.2679,893.3984,321.7963,894.8344,331.5851,895.9206" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="288.2091" y="854.02">SCT in NOT_USED state</text><!--link send_close_request to add_sct_check_timer--><path d="M189.2091,557.0442 C189.2091,577.6566 189.2091,606.9178 189.2091,628.8015 " fill="none" id="send_close_request-add_sct_check_timer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="189.2091,633.9141,193.2091,624.9141,189.2091,628.9141,185.2091,624.9141,189.2091,633.9141" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="190.2091" y="600.02">close request issued</text><!--link free_sct to *end--><path d="M369.2091,938.176 C369.2091,955.7897 369.2091,978.7305 369.2091,993.6459 " fill="none" id="free_sct-*end" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="369.2091,998.7533,373.2091,989.7533,369.2091,993.7533,365.2091,989.7533,369.2091,998.7533" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

title SCT_TIMEOUT PCT event state machine in the retry handler

[*] - -> sct_timeout : C_PCT_SCT_TIMEOUT event

sct_timeout - -> schedule_sct_close : nb retries < max
sct_timeout - -> free_sct : nb retries == max
sct_timeout : process C_PCT_SCT_TIMEOUT event

schedule_sct_close - -> send_close_request : nb retries == 0
schedule_sct_close - -> add_close_timer :  nb retries > 0

add_close_timer - -> send_close_request : close timer expired

check_sct_closed - -> add_sct_check_timer : SCT still pending
check_sct_closed - -> free_sct : SCT in NOT_USED state
check_sct_closed : check whether the SCT was silently closed

add_sct_check_timer : schedule check timer
add_sct_check_timer - -> check_sct_closed : check timer expired

send_close_request - -> schedule_sct_close : PCP paused
send_close_request - -> add_sct_check_timer : close request issued

free_sct - -> [*]

@enduml

PlantUML version 1.2018.13(Mon Nov 26 11:11:51 CST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.5-ea+10-post-Ubuntu-0ubuntu1
Operating System: Linux
OS Version: 5.3.0-24-generic
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>