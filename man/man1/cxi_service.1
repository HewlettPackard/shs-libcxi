.\" Automatically generated by Pandoc 2.9.2.1
.\"
.TH "CXI_SERVICE" "1" "2022-07-19" "Version 0.4.0" "CXI Services"
.hy
.SH NAME
.PP
cxi_service - CXI Service Utility
.SH SYNOPSIS
.PP
\f[B]cxi_service\f[R] \f[B]COMMAND\f[R] [\f[I]OPTIONS\f[R]]
.SH DESCRIPTION
.PP
\f[B]cxi_service\f[R] is a utility which allows for displaying and
modifying (some) CXI Services.
.SH COMMANDS
.TP
\f[B]create\f[R]
Create a service based on the yaml file specified by the -y flag.
.TP
\f[B]delete\f[R]
Delete the service specified by the -s flag.
The DEFAULT Service cannot be deleted
.TP
\f[B]disable\f[R]
Disable (but not delete) the service specified by the -s flag.
.TP
\f[B]enable\f[R]
Enable the service specified by the -s flag.
.TP
\f[B]list\f[R]
Output a list of all CXI devices
.TP
\f[B]update\f[R]
Update the service specified by the -s flag.
Updates are specified in the yaml file specified by the -y flag.
Updating resource limits is not currently supported.
.SH OPTIONS
.TP
\f[B]-d, --device\f[R]=\f[I]DEV\f[R]
The Cassini NIC device name to report.
When unspecified, cxi0 is chosen by default.
.TP
\f[B]-D, --dry-run\f[R]
Used with `update' to perform a trial run with no changes made
.TP
\f[B]-h, --help\f[R]
Display the help text and exit.
.TP
\f[B]-v, --verbose\f[R]
Increase verbosity of output messages.
.TP
\f[B]-s, --svc-id\f[R]
Apply commands to only the svc_id specified.
.TP
\f[B]-V, --version\f[R]
Display the program version and exit.
.TP
\f[B]-y, --yaml-file\f[R]
Path to yaml file to use with the `create' command (see FILES section
for example).
.SH EXAMPLES
.IP
.nf
\f[C]
$ cxi_service -h
cxi_service - CXI Service Utility

Usage: cxi_service <COMMAND> [options]
 -d --device=DEV       CXI device. Default is cxi0
 -h --help             Show this help
 -s --svc_id           Only apply commands to this specific svc_id
 -V --version          Print the version and exit
 -v --verbose          Increase verbosity
 -y --yaml_file        Path to yaml file to use with \[aq]create\[aq] command

Commands:
 create                Create a service
 delete                Delete the service specified by the -s flag
 disable               Disable the service specified by the -s flag
 enable                Enable the service specified by the -s flag
 list                  List all services for a device

$ cxi_service -V
cxi_service version: 0.3.0

$ cxi_service list -d cxi1
cxi1
----
 Total Device Resources
 ----------------------
 ACs:  1022
 CTs:  2047
 EQs:  2047
 LEs:  16384
 PTEs: 2048
 TGQs: 512
 TXQs: 1024
 TLEs: 2048
 --------------------------
 ID: 1 (DEFAULT)
   Enabled            : Yes
   System Service     : No
   Restricted Members : No
   Restricted VNIs    : No
   Restricted TCs     : No
   Resource Limits    : No


$ cxi_service list -v
cxi0
----
 Total Device Resources
 ----------------------
 ACs:  1022
 CTs:  2047
 EQs:  2047
 LEs:  16384
 PTEs: 2048
 TGQs: 512
 TXQs: 1024
 TLEs: 2048
 --------------------------
 ID: 1 (DEFAULT)
   Enabled            : Yes
   System Service     : No
   Restricted Members : No
   ---> Valid Members : All uids/gids
   Restricted VNIs    : No
   ---> Valid VNIs    : All
   Restricted TCs     : No
   ---> Valid TCs     : All
   Resource Limits    : No
   ---> Max           : Max
   ---> Reserved      : None
          -----------
          |  In Use |
          -----------
     ACs  |  0      |
     CTs  |  0      |
     EQs  |  0      |
     LEs  |  0      |
     PTEs |  0      |
     TGQs |  0      |
     TXQs |  0      |
     TLEs |  0      |
          -----------
 --------------------------
 ID: 2
   Enabled            : Yes
   System Service     : No
   Restricted Members : No
   ---> Valid Members : uid=0 gid=0
   Restricted VNIs    : No
   ---> Valid VNIs    : All
   Restricted TCs     : No
   ---> Valid TCs     : All
   Resource Limits    : Yes
          ---------------------------------
          |  Max    |  Reserved |  In Use |
          ---------------------------------
     ACs  |  1      |   1       |  0      |
     CTs  |  10     |   10      |  0      |
     EQs  |  10     |   10      |  0      |
     LEs  |  0      |   0       |  0      |
     PTEs |  10     |   10      |  0      |
     TGQs |  10     |   10      |  0      |
     TXQs |  10     |   10      |  0      |
     TLEs |  0      |   0       |  0      |
          ---------------------------------

$ cxi_service list --svc_id 1
 --------------------------
 ID: 1 (DEFAULT)
   Enabled            : Yes
   System Service     : No
   Restricted Members : No
   Restricted VNIs    : No
   Restricted TCs     : No
   Resource Limits    : No

$ cxi_service delete -s 1
cxi_service: Default service cannot be deleted.

$ cxi_service delete -s 2
Successfully deleted service: 2

$ cxi_service create -y $PATH_TO_YAML_FILE

$ cxi_service update -s 1
cxi_service: Update command requires -y / --yaml_file

$ cxi_service update -s 1 -y install/share/cxi/test.yaml
Successfully updated service: 1

$ cxi_service update -s 1 -y install/share/cxi/test.yaml --dry-run
 Original Service
 --------------------------
 ID: 1 (DEFAULT)
   Enabled            : Yes
   System Service     : No
   Restricted Members : No
   ---> Valid Members : All uids/gids
   Restricted VNIs    : Yes
   ---> Valid VNIs    : 1 10
   Restricted TCs     : No
   ---> Valid TCs     : All
   Resource Limits    : Yes
          ---------------------------------
          |  Max    |  Reserved |  In Use |
          ---------------------------------
     ACs  |  1022   |   0       |  0      |
     CTs  |  2047   |   0       |  0      |
     EQs  |  2047   |   0       |  0      |
     LEs  |  16384  |   0       |  0      |
     PTEs |  2048   |   0       |  0      |
     TGQs |  512    |   0       |  0      |
     TXQs |  1024   |   0       |  0      |
     TLEs |  512    |   512     |  0      |
          ---------------------------------
Updated Service
 --------------------------
 ID: 1 (DEFAULT)
   Enabled            : Yes
   System Service     : No
   Restricted Members : No
   ---> Valid Members : All uids/gids
   Restricted VNIs    : Yes
   ---> Valid VNIs    : 20 40
   Restricted TCs     : Yes
   ---> Valid TCs     : 0 1 2 3
   Resource Limits    : Yes
          ---------------------------------
          |  Max    |  Reserved |  In Use |
          ---------------------------------
     ACs  |  1022   |   0       |  0      |
     CTs  |  2047   |   0       |  0      |
     EQs  |  2047   |   0       |  0      |
     LEs  |  16384  |   0       |  0      |
     PTEs |  2048   |   0       |  0      |
     TGQs |  512    |   0       |  0      |
     TXQs |  1024   |   0       |  0      |
     TLEs |  512    |   512     |  0      |
          ---------------------------------
\f[R]
.fi
.SH FILES
.PP
\f[I]share/cxi/cxi_service_template.yaml\f[R]
\f[C]Sample yaml file to be used with the \[dq]create\[dq] command\f[R]
.SH SEE ALSO
.PP
\f[B]cxi_service\f[R](7)
